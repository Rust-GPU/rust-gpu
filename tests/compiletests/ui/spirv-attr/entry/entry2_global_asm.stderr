
thread 'rustc' panicked at crates/rustc_codegen_spirv/src/linker/specializer.rs:1531:36:
index out of bounds: the len is 9 but the index is 9
stack backtrace:
   0:     0x7f62cc2b9a13 - <std::sys::backtrace::BacktraceLock::print::DisplayBacktrace as core::fmt::Display>::fmt::hc465d815da68b65f
   1:     0x7f62cca02bbf - core::fmt::write::h6e2eb076f9a0f58d
   2:     0x7f62cc2af543 - std::io::Write::write_fmt::h4034a2ae1c7826d5
   3:     0x7f62cc2b9872 - std::sys::backtrace::BacktraceLock::print::h2babb832b0f7487c
   4:     0x7f62cc2bd36a - std::panicking::default_hook::{{closure}}::hd2c14db44ce2b2ee
   5:     0x7f62cc2bceef - std::panicking::default_hook::h6e7d36bb999fce51
   6:     0x7f62cb3847e3 - std[47a95048f41649f2]::panicking::update_hook::<alloc[a82d94b8c3b79735]::boxed::Box<rustc_driver_impl[5ab17e6b36e59dd4]::install_ice_hook::{closure#1}>>::{closure#0}
   7:     0x7f62cb3847e3 - std[47a95048f41649f2]::panicking::update_hook::<alloc[a82d94b8c3b79735]::boxed::Box<rustc_driver_impl[5ab17e6b36e59dd4]::install_ice_hook::{closure#1}>>::{closure#0}
   8:     0x7f62cc2bdbbb - std::panicking::rust_panic_with_hook::h25a3025a927f112d
   9:     0x7f62cc2bd8ba - std::panicking::begin_panic_handler::{{closure}}::h21266e60c12bf697
  10:     0x7f62cc2b9ee9 - std::sys::backtrace::__rust_end_short_backtrace::hef199fe2823162f9
  11:     0x7f62cc2bd59d - __rustc[a3a962cb80ef9725]::rust_begin_unwind
  12:     0x7f62c8aa4570 - core::panicking::panic_fmt::hb5cc6ca3635c7279
  13:     0x7f62ca95f9cd - core::panicking::panic_bounds_check::hf06a7c776474b369
  14:     0x7f62ba16ba35 - rustc_codegen_spirv::linker::specializer::InferCx<S>::resolve_infer_var::h32d8e7052d16c0ef
  15:     0x7f62ba16ba59 - rustc_codegen_spirv::linker::specializer::InferCx<S>::equate_infer_vars::h7c7635cb1ef0b4ae
  16:     0x7f62ba16bd42 - rustc_codegen_spirv::linker::specializer::InferCx<S>::equate_infer_operands::h5ccaee66abd8fcbe
  17:     0x7f62ba16e54f - rustc_codegen_spirv::linker::specializer::InferCx<S>::instantiate_instruction::h293ef96513c35082
  18:     0x7f62ba163a04 - rustc_codegen_spirv::linker::specializer::specialize::hbd549e5122306823
  19:     0x7f62ba11bbf7 - rustc_codegen_spirv::linker::link::h935cf4dab886833d
  20:     0x7f62ba38ce4b - rustc_codegen_spirv::link::link::h283572d27f48d597
  21:     0x7f62ba421c75 - <rustc_codegen_spirv::SpirvCodegenBackend as rustc_codegen_spirv::maybe_pqp_cg_ssa::traits::backend::CodegenBackend>::link::hb7b55a569917e060
  22:     0x7f62cdb09633 - <rustc_interface[9a4f103755b13c1e]::queries::Linker>::link
  23:     0x7f62cdc24219 - rustc_interface[9a4f103755b13c1e]::interface::run_compiler::<(), rustc_driver_impl[5ab17e6b36e59dd4]::run_compiler::{closure#0}>::{closure#1}
  24:     0x7f62cdbe0638 - std[47a95048f41649f2]::sys::backtrace::__rust_begin_short_backtrace::<rustc_interface[9a4f103755b13c1e]::util::run_in_thread_with_globals<rustc_interface[9a4f103755b13c1e]::util::run_in_thread_pool_with_globals<rustc_interface[9a4f103755b13c1e]::interface::run_compiler<(), rustc_driver_impl[5ab17e6b36e59dd4]::run_compiler::{closure#0}>::{closure#1}, ()>::{closure#0}, ()>::{closure#0}::{closure#0}, ()>
  25:     0x7f62cdbe0316 - <<std[47a95048f41649f2]::thread::Builder>::spawn_unchecked_<rustc_interface[9a4f103755b13c1e]::util::run_in_thread_with_globals<rustc_interface[9a4f103755b13c1e]::util::run_in_thread_pool_with_globals<rustc_interface[9a4f103755b13c1e]::interface::run_compiler<(), rustc_driver_impl[5ab17e6b36e59dd4]::run_compiler::{closure#0}>::{closure#1}, ()>::{closure#0}, ()>::{closure#0}::{closure#0}, ()>::{closure#1} as core[28534e9693d03804]::ops::function::FnOnce<()>>::call_once::{shim:vtable#0}
  26:     0x7f62cdbde93d - std::sys::pal::unix::thread::Thread::new::thread_start::hf0d6fc1bcf013f18
  27:     0x7f62c74978ee - start_thread
  28:     0x7f62c751b9bc - __GI___clone3
  29:                0x0 - <unknown>

error: the compiler unexpectedly panicked. this is a bug.

note: we would appreciate a bug report: https://github.com/rust-lang/rust/issues/new?labels=C-bug%2C+I-ICE%2C+T-compiler&template=ice.md

note: please make sure that you have updated to the latest nightly

note: please attach the file at `$SRC_DIR/rustc-ice-2026-01-20T11_51_15-31966.txt` to your bug report

note: compiler flags: -C prefer-dynamic -Z codegen-backend=/home/firestar99/workspace/rust-gpu/target/release/deps/librustc_codegen_spirv.so -Z binary-dep-depinfo -C symbol-mangling-version=v0 -Z crate-attr=feature(register_tool) -Z crate-attr=register_tool(rust_gpu) -C overflow-checks=off -C debug-assertions=off -Z inline-mir=off -Z mir-enable-passes=-GVN -Z share-generics=off -C debuginfo=2 -C embed-bitcode=no --crate-type dylib -Z unstable-options -Z crate-attr=no_std -Z crate-attr=feature(asm_experimental_arch) -Z ui-testing -C llvm-args=--disassemble

query stack during panic:
end of query stack

error: the compiler unexpectedly panicked. this is a bug.

note: we would appreciate a bug report: https://github.com/rust-gpu/rust-gpu/issues/new

note: please make sure that you have updated to the latest nightly

note: please attach the file at `$SRC_DIR/rustc-ice-2026-01-20T11_51_15-31966.txt` to your bug report

note: compiler flags: -C prefer-dynamic -Z codegen-backend=/home/firestar99/workspace/rust-gpu/target/release/deps/librustc_codegen_spirv.so -Z binary-dep-depinfo -C symbol-mangling-version=v0 -Z crate-attr=feature(register_tool) -Z crate-attr=register_tool(rust_gpu) -C overflow-checks=off -C debug-assertions=off -Z inline-mir=off -Z mir-enable-passes=-GVN -Z share-generics=off -C debuginfo=2 -C embed-bitcode=no --crate-type dylib -Z unstable-options -Z crate-attr=no_std -Z crate-attr=feature(asm_experimental_arch) -Z ui-testing -C llvm-args=--disassemble

query stack during panic:
end of query stack
note: `rust-gpu` version `0.9.0`

